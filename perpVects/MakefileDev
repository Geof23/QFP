#CC := clang++
CC := g++
FFLAGS ?= 
TARGET ?= test

CPPFLAGS ?= -Wuninitialized -g #-fsanitize=thread

CPPFLAGS += -std=c++11 -lm -Wno-shift-count-overflow -MMD  -I../gdb/inst -I. \
	 -Ieigen -Ieigen/Eigen $(FFLAGS) -lpthread -pthread

INCFILES := $(wildcard *.h)
INCFILES += $(wildcard eigen/*.h)
INCFILES += $(wildcard eigen/Eigen/*)

SOURCE := $(wildcard *.cpp)
OBJ := $(SOURCE:.cpp=.o)

.phony : all

all :  $(TARGET)

$(TARGET) : $(OBJ)
	$(CC) $(CPPFLAGS)   -o $@ $^ 

%.o : %.cpp $(INCFILES)
	$(CC) $(CPPFLAGS) -c $< -o $@

.phony : clean

clean :
	rm -f *.o test *.d
